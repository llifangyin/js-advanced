并发模型与事件循环：

**JavaScript有一个基于事件循环的并发模型，事件循环负责执行代码、收集和处理使劲按以及执行队列中的子任务。**

运行时：
**Queue ：[message,message....]**
**stack:[frame,frame,...]**
**Heap:[obj,obj,...]**

栈：
**函数调用形成了一个由若干帧组成的栈；（栈帧）**
**调用一个函数总是回为其创造一个新的栈帧。**

堆：
**对象被分配在堆中，堆时一个用来表示一大块（非结构化)内存区域的计算机术语**

队列:
**一个JavaScript运行时包含了一个待处理消息的消息队列。每一个消息都关联着一个用以处理这个消息的回调函数。**
**函数的处理会一直进行到执行栈再次为空位置；然后事件循环会将处理队列中的下一个消息。**





事件循环：


while (queue.waitForMessage()) {
  queue.processNextMessage();
}
执行至完成：
一个消息完整的执行后，其他消息才会执行。这与C语言不同，它可任意终止

添加消息:
**事件监听器：触发事件（点击、hover、滚动...）就会产生一个消息**
**settimeout：**
**参数1 加入队列的消息**
**参数2 消息被实际加入到队列的最小延迟时间。必须等其他消息处理完才执行。**

**多个运行时互相通信：**
**web worker或 iframe都有自己的栈、堆和消息队列。**
**可以用postmessage进通信。侦听到message时，会向该运行时添加消息。**

用不阻塞：
处理I/O时通过事件和回调来执行，

所以当一个应用正等待一个 IndexedDB 查询返回或者一个 XHR 请求返回时，它仍然可以处理其它事情，比如用户输入。
???非阻塞含义 并发
类似nodejs非阻塞I/O
